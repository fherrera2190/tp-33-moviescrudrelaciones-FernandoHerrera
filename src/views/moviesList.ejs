<!DOCTYPE html>
<html lang="en">

<%- include('./partials/head.ejs',{title:'Listado de Películas'}) %>

<body>
  <%- include('./partials/header.ejs') %>
  <h1>LISTADO DE PELÍCULAS</h1>
  <hr>
  <br>
  <div class="d-flex align-items-center justify-content-between  ">
    <div class="mx-3">
      <a class="botonVolver" href="/">inicio</a>
      <a class="botonAgregar" href="/movies/add">Agregar una Pelicula</a>
    </div>
    <div>
      <nav aria-label="Page navigation example ">
        <ul class="pagination">
          <% if(paginate.hasPreviousPages || paginate.hasNextPages(pagesCount)){%>
          <% if (paginate.hasPreviousPages) { %>
          <li class="page-item">

            <a href="<%=paginate.href().prev %>" class="page-link prev">Previous</a>
          </li>
          <% }else{ %>
          <li class="page-item">
            <a href="#" class="page-link disabled">Previous</a>
          </li>
          <% } %>
          <% if (pages) { %>
          <% pages.forEach(page=> { %>
          <li class="page-item">
            <a href="<%=page.url%>" class="page-link <%=page.number===currentPage&&"current"%> "><%=page.number%></a>
          </li>
          <% }) %>
          <% } %>

          <% if (paginate.hasNextPages(pagesCount)) { %>
          <li class="page-item">
            <a href="<%=paginate.href()%>" class="page-link">Next</i></a>
          </li>
          <% }else{ %>
            <li class="page-item">
              <a href="#" class="page-link disabled ">Next</i></a>
            </li>
          <% } %>
          <% } %>
        </ul>
      </nav>
    </div>
  </div>
  <br>
  <hr>
  <div class="container">
    <div class="d-flex justify-content-start  gap-3  flex-wrap ">
      <% for( let i = 0; i < movies.length; i++ ) { %>
      <%-include('./partials/movieCard.ejs',{url:"/movies/detail/"+movies[i].id, title:movies[i].title, image:movies[i].image}) %>
      <% } %>
    </div>
  </div>
  <%- include('./partials/scripts.ejs') %>
</body>

</html>